<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Microsoft Azure IoT Device SDK for C: c/serializer/inc/serializer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Microsoft Azure IoT Device SDK for C
   &#160;<span id="projectnumber">1.0.0-preview.3</span>
   </div>
   <div id="projectbrief">The Microsoft Azure IoT device libraries for C contain code that facilitates building devices and applications that connect to and are managed by Azure IoT Hub services.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1784a01aa976a8c78ef5dfc3737bcac8.html">c</a></li><li class="navelem"><a class="el" href="dir_12d2b36f129c41023f7f4a6bff2578c5.html">serializer</a></li><li class="navelem"><a class="el" href="dir_4512fd3943e6edf693cef6803bd9b15b.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">serializer.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The IoT Hub Serializer APIs allows developers to define models for their devices.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &quot;gballoc.h&quot;</code><br />
<code>#include &quot;macro_utils.h&quot;</code><br />
<code>#include &quot;iotdevice.h&quot;</code><br />
<code>#include &quot;crt_abstractions.h&quot;</code><br />
<code>#include &quot;iot_logging.h&quot;</code><br />
<code>#include &quot;<a class="el" href="schemalib_8h_source.html">schemalib.h</a>&quot;</code><br />
<code>#include &quot;codefirst.h&quot;</code><br />
<code>#include &quot;agenttypesystem.h&quot;</code><br />
<code>#include &quot;schema.h&quot;</code><br />
</div>
<p><a href="serializer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad409cf8f57d6766ce80a504e679bb6a6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serializer_8h.html#ad409cf8f57d6766ce80a504e679bb6a6">BEGIN_NAMESPACE</a>(schemaNamespace)</td></tr>
<tr class="separator:ad409cf8f57d6766ce80a504e679bb6a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af169ba5b3435392cf046bd3e07e324d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serializer_8h.html#af169ba5b3435392cf046bd3e07e324d3">END_NAMESPACE</a>(schemaNamespace)</td></tr>
<tr class="separator:af169ba5b3435392cf046bd3e07e324d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeaee7762d880f428ed4ba88ca7db1e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serializer_8h.html#aeeaee7762d880f428ed4ba88ca7db1e6">DECLARE_STRUCT</a>(name, ...)</td></tr>
<tr class="separator:aeeaee7762d880f428ed4ba88ca7db1e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03ed9d2601530986f0be6c9e675a9489"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serializer_8h.html#a03ed9d2601530986f0be6c9e675a9489">DECLARE_MODEL</a>(name, ...)</td></tr>
<tr class="separator:a03ed9d2601530986f0be6c9e675a9489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebcff311f305eddbad1712b8d7aded85"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serializer_8h.html#aebcff311f305eddbad1712b8d7aded85">WITH_DATA</a>(type,  name)</td></tr>
<tr class="separator:aebcff311f305eddbad1712b8d7aded85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3c020f5a3943e946cc9a01c958af4c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serializer_8h.html#a2b3c020f5a3943e946cc9a01c958af4c">WITH_ACTION</a>(name, ...)</td></tr>
<tr class="separator:a2b3c020f5a3943e946cc9a01c958af4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887590f4b40f78bf359c8e56f03c56fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serializer_8h.html#a887590f4b40f78bf359c8e56f03c56fe">GET_MODEL_HANDLE</a>(schemaNamespace,  modelName)</td></tr>
<tr class="separator:a887590f4b40f78bf359c8e56f03c56fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c48c356331a3ff3084ff604da29b91"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serializer_8h.html#a18c48c356331a3ff3084ff604da29b91">SERIALIZE</a>(destination,  destinationSize, ...)</td></tr>
<tr class="separator:a18c48c356331a3ff3084ff604da29b91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b306a60e81bcfdf3729962df530ec16"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serializer_8h.html#a8b306a60e81bcfdf3729962df530ec16">EXECUTE_COMMAND</a>(device,  command)</td></tr>
<tr class="separator:a8b306a60e81bcfdf3729962df530ec16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The IoT Hub Serializer APIs allows developers to define models for their devices. </p>
<p>The IoT Hub Serializer APIs allows developers to quickly and easily define models for their devices directly as code, while supporting the required features for modeling devices (including multiple models and multiple devices within the same application). For example:</p>
<pre>
    <a class="el" href="serializer_8h.html#ad409cf8f57d6766ce80a504e679bb6a6">BEGIN_NAMESPACE(Contoso)</a>;</pre><pre>        DECLARE_STRUCT(SystemProperties,
            ascii_char_ptr, DeviceID,
            _Bool, Enabled
        );</pre><pre>        DECLARE_MODEL(VendingMachine,</pre><pre>            <a class="el" href="serializer_8h.html#aebcff311f305eddbad1712b8d7aded85">WITH_DATA(int, SensorValue)</a>,</pre><pre>            <a class="el" href="serializer_8h.html#aebcff311f305eddbad1712b8d7aded85">WITH_DATA(ascii_char_ptr, ObjectName)</a>,
            <a class="el" href="serializer_8h.html#aebcff311f305eddbad1712b8d7aded85">WITH_DATA(ascii_char_ptr, ObjectType)</a>,
            <a class="el" href="serializer_8h.html#aebcff311f305eddbad1712b8d7aded85">WITH_DATA(ascii_char_ptr, Version)</a>,
            <a class="el" href="serializer_8h.html#aebcff311f305eddbad1712b8d7aded85">WITH_DATA(SystemProperties, SystemProperties)</a>,
            <a class="el" href="serializer_8h.html#aebcff311f305eddbad1712b8d7aded85">WITH_DATA(ascii_char_ptr_no_quotes, Commands)</a>,</pre><pre>            <a class="el" href="serializer_8h.html#a2b3c020f5a3943e946cc9a01c958af4c">WITH_ACTION(SetItemPrice, ascii_char_ptr, itemId, ascii_char_ptr, price)</a>
        );</pre><pre>    <a class="el" href="serializer_8h.html#af169ba5b3435392cf046bd3e07e324d3">END_NAMESPACE(Contoso)</a>;
    </pre> </div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad409cf8f57d6766ce80a504e679bb6a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BEGIN_NAMESPACE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">schemaNamespace</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro marks the start of a section that declares IOT model elements (like complex types, etc.). Declarations are typically placed in header files, so that they can be shared between translation units. </p>

</div>
</div>
<a class="anchor" id="a03ed9d2601530986f0be6c9e675a9489"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DECLARE_MODEL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro allows declaring a model that can be later used to instantiate a device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Specifies the model name </td></tr>
    <tr><td class="paramname">element1,element2...</td><td>Specifies a model element which can be a property or an action.<ul>
<li>A property is described in a model by using the WITH_DATA</li>
<li>An action is described in a model by using the <a class="el" href="serializer_8h.html#a2b3c020f5a3943e946cc9a01c958af4c">WITH_ACTION</a> macro. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aeeaee7762d880f428ed4ba88ca7db1e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DECLARE_STRUCT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro allows the definition of a struct type that can then be used as part of a model definition.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of the struct </td></tr>
    <tr><td class="paramname">element1,element2...</td><td>Specifies a list of struct members </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af169ba5b3435392cf046bd3e07e324d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define END_NAMESPACE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">schemaNamespace</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro marks the end of a section that declares IOT model elements. </p>

</div>
</div>
<a class="anchor" id="a8b306a60e81bcfdf3729962df530ec16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXECUTE_COMMAND</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">device, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">command&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Any action that is declared in a model must also have an implementation as a C function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>Pointer to device data. </td></tr>
    <tr><td class="paramname">command</td><td>Values that match the arguments declared in the model action. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a887590f4b40f78bf359c8e56f03c56fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_MODEL_HANDLE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">schemaNamespace, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">modelName&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="serializer_8h.html#a887590f4b40f78bf359c8e56f03c56fe">GET_MODEL_HANDLE</a> macro returns a model handle that can be used in subsequent operations like generating the CSDL schema for the model, uploading the schema, creating a device, etc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">schemaNamespace</td><td>The namespace to which the model belongs. </td></tr>
    <tr><td class="paramname">modelName</td><td>The name of the model. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a18c48c356331a3ff3084ff604da29b91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERIALIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">destination, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">destinationSize, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro produces JSON serialized representation of the properties.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">destination</td><td>Pointer to an <code>unsigned</code> <code>char*</code> that will receive the serialized data. </td></tr>
    <tr><td class="paramname">destinationSize</td><td>Pointer to a <code>size_t</code> that gets written with the size in bytes of the serialized data </td></tr>
    <tr><td class="paramname">property1,property2...</td><td>A list of property values to send. The order in which the properties appear in the list does not matter, all values will be sent together. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2b3c020f5a3943e946cc9a01c958af4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WITH_ACTION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="serializer_8h.html#a2b3c020f5a3943e946cc9a01c958af4c">WITH_ACTION</a> macro allows declaring a model action.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Specifies the action name. </td></tr>
    <tr><td class="paramname">argXtype,argXName...</td><td>Defines the type and name for the X<sup>th</sup> argument of the action. The type can be any of the primitive types or a struct type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aebcff311f305eddbad1712b8d7aded85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WITH_DATA</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="serializer_8h.html#aebcff311f305eddbad1712b8d7aded85">WITH_DATA</a> macro allows declaring a model property in a model. A property can be published by using the <a class="el" href="serializer_8h.html#a18c48c356331a3ff3084ff604da29b91">SERIALIZE</a> macro.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Specifies the property type. Can be any of the following types:<ul>
<li>int</li>
<li>double</li>
<li>float</li>
<li>long</li>
<li>int8_t</li>
<li>uint8_t</li>
<li>int16_t</li>
<li>int32_t</li>
<li>int64_t</li>
<li>bool</li>
<li>ascii_char_ptr</li>
<li>EDM_DATE_TIME_OFFSET</li>
<li>EDM_GUID</li>
<li>EDM_BINARY</li>
<li>Any struct type previously introduced by another <a class="el" href="serializer_8h.html#aeeaee7762d880f428ed4ba88ca7db1e6">DECLARE_STRUCT</a>.</li>
</ul>
</td></tr>
    <tr><td class="paramname">name</td><td>Specifies the property name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
